(window.webpackJsonp=window.webpackJsonp||[]).push([[363],{1066:function(e,t,r){"use strict";r.r(t);r(10),r(11),r(12),r(13),r(53),r(67),r(7);var n=r(44),c=r(23);t.default=Object(c.c)((function(e){var t,r=e.store,c=e.route,l=e.redirect,m=e.from,f=n.m[null===(t=c.query)||void 0===t?void 0:t.target]?n.m[c.query.target]:"/",v=m&&m.fullPath||f,meta=c.meta[0]||{};if(meta.requiresRole&&!o(r,meta.requiresRole))return l(v);if(meta.requiresRoleOrWhitelist){var h=meta.requiresRoleOrWhitelist.roles||[],x=meta.requiresRoleOrWhitelist.whitelists||[];if(!o(r,h)||!d(r,x))return l(v)}r.dispatch("page/setBurgerStatus",!1)}));var o=function(e,t){var r=function(e){return e.getters["user/getUser"]}(e);return!!r&&(Array.isArray(t)||(t=[t]),t.includes(parseInt(r.roleId)))},d=function(e,t){return Array.isArray(t)||(t=[t]),t.some((function(t){return e.getters["whitelist/isAuthorized"](t)}))}},1067:function(e,t,r){"use strict";r.r(t);r(10),r(11),r(12),r(13),r(40);var n=r(23);t.default=Object(n.c)((function(e){var t=e.app,r=e.route;var n=r.fullPath,c=r.name,o=t.$mixpanel;(0,t.$gtmEvent)({event:"nuxtRoute",pageType:"PageView",pageUrl:n,routeName:c}),o.track("dsb_pageSession")}))},1068:function(e,t,r){"use strict";r.r(t);var n=r(0),c=(r(10),r(11),r(12),r(13),r(9),r(40),r(38),r(75),r(7),r(35),r(36),r(23));t.default=Object(c.c)(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,d,l,m,f,path,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.redirect,n=t.app,c=t.params,o=t.store,d=t.route,l=d.matched,c.assetName&&c.assetId){e.next=4;break}return e.abrupt("return",r("/shop"));case 4:if(o.state.page.assetRedirect!==c.assetId){e.next=9;break}return e.next=7,o.dispatch("page/assetRedirect",null);case 7:e.next=11;break;case 9:return e.next=11,o.dispatch("products/getAsset",{id:c.assetId});case 11:if(m=o.state.products.assets.selected){e.next=14;break}return e.abrupt("return",r("/shop"));case 14:if(f=n.$encode(m.name)||"_",c.assetName===f){e.next=20;break}return e.next=18,o.dispatch("page/assetRedirect",c.assetId);case 18:return path=l[0].path.replace("/:lang?","/".concat(c.lang)).replace("/:assetName?","/".concat(f)).replace("/:assetId","/".concat(m.id)),e.abrupt("return",r(301,{path:path}));case 20:return v=[o.dispatch("assetsignedauction/getAssetAuctions",{tokenId:m.blockchainId,asset:m})],(h=o.getters["user/getWallet"])&&v.push(o.dispatch("assetsignedauction/getAssetAuctionsFuture",{tokenId:m.blockchainId,walletAddress:h})),0===o.getters["categories/get"]("categories",[]).length&&v.push(o.dispatch("categories/getAllCategories")),e.next=27,Promise.all(v).catch((function(){}));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},1069:function(e,t,r){"use strict";r.r(t);var n=r(0),c=(r(10),r(11),r(12),r(13),r(9),r(44)),o=r(23);t.default=Object(o.c)(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,o,d,l,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.redirect,n=t.params,o=t.store,d=t.route,l=d.fullPath,n.slug&&n.id){e.next=4;break}return e.abrupt("return",r("/blog"));case 4:return m=l.substring(1,3),m=c.w[m],e.next=8,o.dispatch("blog/getPostWithid",{id:n.id,lang:m});case 8:if(o.getters["blog/activePost"]){e.next=11;break}return e.abrupt("return",r("/blog"));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},1070:function(e,t,r){"use strict";r.r(t);r(10),r(11),r(12),r(13);var n=r(23);t.default=Object(n.c)((function(e){var t,r,n=e.redirect,c=e.app,o=null===(t=e.store.state.user)||void 0===t?void 0:t.currentUser;if(null===(r=c.$device)||void 0===r?void 0:r.isMobile)return n("/users/".concat(o.username))}))},1071:function(e,t,r){"use strict";r.r(t);var n=r(0),c=(r(10),r(11),r(12),r(13),r(9),r(53),r(67),r(86),r(7),r(50),r(23));t.default=Object(c.c)(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,path,d,l,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.redirect,n=t.params,c=t.store,o=t.route,path=o.path,d=c.state.user.currentUser){e.next=5;break}return e.abrupt("return",r({path:"/auth/",query:{redirect:path}}));case 5:if(!((l=path.split("/")).includes("members")&&!l.includes("workspaces")||l.includes("settings")&&!l.includes("workspaces")||l.includes("reporting"))){e.next=8;break}return e.abrupt("return",r("/me/communities/".concat(l[4])));case 8:if(n.communityUrl){e.next=10;break}return e.abrupt("return",r("/"));case 10:return e.next=12,c.dispatch("community/getCommunitiesByUserId");case 12:if(m=c.getters["community/get"]("communitiesByUserId"),f=m.find((function(e){return e.url.slice(1)===n.communityUrl}))){e.next=16;break}return e.abrupt("return",r("/"));case 16:return e.next=18,c.dispatch("community/setSelectedCommunity",f);case 18:return e.next=20,c.dispatch("community/getCommunityMemberByUserId",{id:f.id,user:d.id});case 20:return e.next=22,c.dispatch("workspaces/getAmountOfWorkspacesByUser",{basic:!0});case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},1072:function(e,t,r){"use strict";r.r(t);var n=r(0),c=(r(10),r(11),r(12),r(13),r(9),r(174),r(188)),o=r(23);function d(e,t){var r=e.Wallets,n=t.ownerAddress;return!!(n&&r&&r.length)&&n.toLowerCase()===r[0].address.toLowerCase()}t.default=Object(o.c)(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,o,l,path,m,f,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.redirect,n=t.params,o=t.store,l=t.route,path=l.path,m="/shop/",n.estateId){e.next=5;break}return e.abrupt("return",r(m));case 5:return e.prev=5,e.next=8,o.dispatch("products/getEstate",{id:n.estateId});case 8:if(f=o.state.products.mapSelected){e.next=11;break}return e.abrupt("return",r(m));case 11:if(!path.endsWith("/edit/")){e.next=15;break}if((v=o.state.user.currentUser)&&(Object(c.c)(v.roleId)||d(v,f))){e.next=15;break}return e.abrupt("return",r(m));case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(5),e.abrupt("return",r(m));case 20:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}())},1073:function(e,t,r){"use strict";r.r(t);var n=r(0),c=(r(10),r(11),r(12),r(13),r(9),r(7),r(35),r(36),r(53),r(67),r(23));t.default=Object(c.c)(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,d,l,m,f,v,h,path,x,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=t.store,f=t.redirect,v=t.params,h=t.route,path=h.path,v.permaLink){e.next=4;break}return e.abrupt("return",f("/events/"));case 4:if((x=m.getters["socialEvents/get"]("selectedEvent"))&&(null===(r=x)||void 0===r||!r.permaLink||(null===(n=x)||void 0===n?void 0:n.permaLink)===v.permaLink)){e.next=8;break}return e.next=8,Promise.all([m.dispatch("socialEvents/getByPermaLink",{permaLink:v.permaLink}),m.dispatch("socialEvents/setClearEventExperiences"),m.dispatch("socialEvents/setClearEventProgressData")]);case 8:if((x=m.getters["socialEvents/get"]("selectedEvent"))&&!(path.includes("/events/".concat(null===(c=x)||void 0===c?void 0:c.permaLink))&&new Date(null===(o=x)||void 0===o?void 0:o.startDate)>new Date)){e.next=11;break}return e.abrupt("return",f("/events"));case 11:if(!(path.includes("/events/".concat(null===(d=x)||void 0===d?void 0:d.permaLink,"/play/"))&&new Date(null===(l=x)||void 0===l?void 0:l.endDate)<new Date)){e.next=13;break}return e.abrupt("return",f("/events/".concat(null===(y=x)||void 0===y?void 0:y.permaLink)));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},1074:function(e,t,r){"use strict";r.r(t);r(10),r(11),r(12),r(13),r(53),r(67);var n=r(23),c=r(774);t.default=Object(n.c)((function(e){var t=e.redirect,r=e.app,n=e.store,path=e.route.path,o=n.getters["socialEvents/get"]("selectedEvent"),d=Object(c.a)(r.$ff,!1);return!d&&path.includes("/events/".concat(null==o?void 0:o.permaLink,"/play/"))||null!=o&&o.isForbidden?t("/events/".concat(null==o?void 0:o.permaLink)):!d&&path.includes("/events/play")?t("/events/"):void 0}))},1077:function(e,t,r){"use strict";r.r(t);var n=r(0),c=(r(10),r(11),r(12),r(13),r(9),r(40),r(38),r(75),r(7),r(35),r(36),r(174),r(341),r(23));t.default=Object(c.c)(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,d,l,m,path,f,v,h,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.redirect,n=t.app,c=t.params,o=t.store,d=t.route,l=d.fullPath,m=d.matched,path=d.path,c.experienceName&&c.experienceId){e.next=4;break}return e.abrupt("return",r("/"));case 4:if(o.state.page.assetRedirect!==c.experienceId){e.next=9;break}return e.next=7,o.dispatch("page/assetRedirect",null);case 7:case 12:e.next=19;break;case 9:return e.prev=9,e.next=12,o.dispatch("experiences/getExperience",{id:c.experienceId,extendedInfo:!0});case 14:if(e.prev=14,e.t0=e.catch(9),!e.t0.response||401!==e.t0.response.status){e.next=18;break}return e.abrupt("return",r({path:"/auth/",query:{redirectTo:l}}));case 18:return e.abrupt("return",r("/"));case 19:if(f=o.getters["experiences/get"]("experience")){e.next=22;break}return e.abrupt("return",r("/"));case 22:if(v=f.versions&&f.versions.length>0?f.versions[f.versions.length-1].friendlyName:f.name,h=n.$encode(v),c.experienceName===h){e.next=29;break}return e.next=27,o.dispatch("page/assetRedirect",c.experienceId);case 27:return x=m[0].path.replace("/:lang?","/".concat(c.lang)).replace("/:experienceName?","/".concat(h)).replace("/:experienceId","/".concat(f.id)),e.abrupt("return",r(301,{path:x}));case 29:if(o.state.user.currentUser){e.next=32;break}return e.abrupt("return",r({path:"/auth/",query:{redirectTo:l}}));case 32:return e.next=34,Promise.all([o.dispatch("experiences/getExperiencesTags").catch((function(){}))]);case 34:if(!path.endsWith("/edit/")){e.next=36;break}return e.abrupt("return",r(path.replaceAll("edit","hub")));case 36:return e.abrupt("return",r("".concat(l,"page")));case 37:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t){return e.apply(this,arguments)}}())},1079:function(e,t,r){"use strict";r.r(t);r(10),r(11),r(12),r(13);var n=r(23),c=r(398);t.default=Object(n.c)((function(e){var t=e.redirect,r=e.app,n=e.$device;if(!Object(c.b)(r.$ff,!1)||n.isMobile)return t("/")}))},1080:function(e,t,r){"use strict";r.r(t);var n=r(4),c=r(0),o=(r(10),r(11),r(12),r(13),r(9),r(7),r(41),r(38),r(75),r(160),r(17),r(18),r(20),r(22),r(15),r(21),r(23)),d=r(43),l=r.n(d);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=Object(o.c)(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,d,path,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.redirect,c=t.store,o=t.route,d=o.query,path=o.path,c.state.user.currentUser){e.next=4;break}return e.abrupt("return");case 4:if(m=new l.a(c.state.user.currentUser.id.replace(/-/g,""),"hex").toString(10),null!=d&&null!==(r=d.ckey)&&void 0!==r&&r.startsWith(m)){e.next=7;break}return e.abrupt("return",n(301,{path:path,query:f(f({},d),{},{ckey:m+"_"+Date.now()})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},1081:function(e,t,r){"use strict";r.r(t);var n=r(0),c=(r(10),r(11),r(12),r(13),r(9),r(31),r(86),r(7),r(50),r(16)),o=r(23);function d(e,t){return l.apply(this,arguments)}function l(){return(l=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.dispatch("community/getCommunitiesByUserId");case 2:return e.next=4,r.getters["community/get"]("communitiesByUserId");case 4:if(n=e.sent,c=n.find((function(e){return e.url.slice(1)===t}))){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,r.dispatch("community/setSelectedCommunity",c);case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.default=Object(o.c)(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,o,l,path,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.redirect,n=t.params,o=t.store,l=t.route,path=l.path,n.inviteHash&&n.communityUrl&&n.workspaceUrl){e.next=4;break}return e.abrupt("return",r("/"));case 4:if(c.enableFeatureCollab){e.next=6;break}return e.abrupt("return",r("/"));case 6:if(o.state.user.currentUser){e.next=17;break}return e.next=10,o.dispatch("invite/setRedirectInviteHash",n.inviteHash);case 10:return e.next=12,o.dispatch("invite/setRedirectCommumnityUrl",n.communityUrl);case 12:return e.next=14,o.dispatch("invite/setRedirectWorkUrl",n.workspaceUrl);case 14:return e.next=16,o.dispatch("invite/setNeedsRedirect",!0);case 16:return e.abrupt("return",r({path:"/auth/",query:{redirect:path}}));case 17:return e.next=19,d(n.communityUrl,o);case 19:if(e.sent){e.next=22;break}return e.abrupt("return",r("/"));case 22:return e.next=24,o.dispatch("invite/errorOnClaimInvite",null);case 24:return e.next=26,o.dispatch("invite/claimInvite",{hash:n.inviteHash,commUrl:n.communityUrl});case 26:if(!(m=o.getters["invite/get"]("claimInvite")).success){e.next=31;break}return e.abrupt("return",r("/me/communities/".concat(n.communityUrl,"/workspace/").concat(n.workspaceUrl,"/assets")));case 31:return e.next=33,o.dispatch("invite/setRedirectCommumnityUrl",n.communityUrl);case 33:return e.next=35,o.dispatch("invite/errorOnClaimInvite",m.msg);case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},1082:function(e,t,r){"use strict";r.r(t);var n=r(0),c=(r(10),r(11),r(12),r(13),r(9),r(174),r(188)),o=r(23);t.default=Object(o.c)(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,o,l,path,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.redirect,n=t.params,o=t.store,l=t.route,path=l.path,n.landId){e.next=4;break}return e.abrupt("return",r("/shop/"));case 4:return e.prev=4,e.next=7,o.dispatch("products/getLand",{id:n.landId});case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(4),e.abrupt("return",r("/shop/"));case 12:if(m=o.state.products.mapSelected){e.next=15;break}return e.abrupt("return",r("/shop/"));case 15:if(!path.endsWith("/edit/")){e.next=19;break}if((f=o.state.user.currentUser)&&(Object(c.c)(f.roleId)||d(f,m))){e.next=19;break}return e.abrupt("return",r("/shop/"));case 19:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}());var d=function(e,t){return t.ownerAddress&&e.Wallets&&e.Wallets.length>0&&t.ownerAddress.toLowerCase()===e.Wallets[0].address.toLowerCase()}},1083:function(e,t,r){"use strict";r.r(t);var n=r(0),c=(r(10),r(11),r(12),r(13),r(9),r(398)),o=r(23);t.default=Object(o.c)(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,o,d,p,l,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.redirect,n=t.store,o=t.app,d="/",p=function(){return n.getters["presaleconfig/getCurrentActivePresale"]},l=function(){return n.getters["landsalelottery/get"]("lotteries")},e.prev=4,Object(c.a)(o.$ff)){e.next=7;break}return e.abrupt("return",r(d));case 7:if(p()){e.next=9;break}return e.abrupt("return",r(d));case 9:if(null!==(m=l())&&void 0!==m&&m.length){e.next=12;break}return e.next=12,n.dispatch("landsalelottery/lotteries",p().sector);case 12:if(l()[0].sectorId===p().sector){e.next=17;break}return e.next=15,n.dispatch("landsalelottery/lotteries",p().sector);case 15:if(l().length){e.next=17;break}return e.abrupt("return",r(d));case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(4),e.abrupt("return",r(d));case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}())},1084:function(e,t,r){"use strict";r.r(t);r(10),r(11),r(12),r(13);var n=r(23);t.default=Object(n.c)((function(e){var t,r=e.redirect,n=e.store,c=e.route.fullPath;if(!(null===(t=n.state.user)||void 0===t?void 0:t.currentUser))return r({path:"/sign",query:{redirectTo:c}})}))},1085:function(e,t,r){"use strict";r.r(t);r(10),r(11),r(12),r(13);var n=r(23);t.default=Object(n.c)((function(e){var t=e.redirect,r=e.store,n=e.route.fullPath;if(!r.state.user.currentUser)return t({path:"/auth/",query:{redirect:n}})}))},1086:function(e,t,r){"use strict";r.r(t);var n=r(0),c=(r(10),r(11),r(12),r(13),r(9),r(38),r(75),r(1)),o=r(23);t.default=Object(o.c)(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,o,d,l,m,f,v,h,x,y,k,path;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.redirect,d=t.app,l=t.params,m=t.store,f=t.route,v=f.matched,l.userName){e.next=4;break}return e.abrupt("return",o("/shop"));case 4:if((null===(r=m.state.user)||void 0===r||null===(r=r.currentUser)||void 0===r?void 0:r.username)!==l.userName){e.next=9;break}if(m.dispatch("page/userRedirect",null),(null==(h=m.getters["users/get"]("selectedUser"))?void 0:h.username)!==l.userName){e.next=9;break}return e.abrupt("return");case 9:if((null===(n=m.state.user)||void 0===n||null===(n=n.currentUser)||void 0===n?void 0:n.username)!==l.userName||!m.state.users.selectedUser.data||m.state.users.selectedUser.data.username!==l.userName){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,Object(c.a)().get("/users/username/".concat(l.userName)).catch((function(e){return console.error(e.response?e.response.data:e),null}));case 13:if(x=e.sent){e.next=16;break}return e.abrupt("return",o("/shop"));case 16:return y=x.data,e.next=19,m.dispatch("users/selectUser",y);case 19:if(k=d.$encode(d.$username(y,-1)),l.userName===k){e.next=25;break}return e.next=23,m.dispatch("page/userRedirect",y.id);case 23:return path=v[0].path.replace("/:userName","/".concat(k)),e.abrupt("return",o({path:path}));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},1087:function(e,t,r){"use strict";r.r(t);var n=r(19),c=r(0),o=(r(10),r(11),r(12),r(13),r(9),r(53),r(67),r(89),r(31),r(149),r(86),r(7),r(50),r(15),r(777)),d=r(44),l=r(340),m=r(23);function f(e,t){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.dispatch("community/getCommunitiesByUserId");case 2:return e.next=4,r.getters["community/get"]("communitiesByUserId");case 4:if(n=e.sent,c=n.find((function(e){return e.url.slice(1)===t}))){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,r.dispatch("community/setSelectedCommunity",c);case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,r,n){return x.apply(this,arguments)}function x(){return(x=Object(c.a)(regeneratorRuntime.mark((function e(t,r,n,c){var o,d,l,m,f,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=(null===(o=c.getters["workspaces/get"]("workspaces"))||void 0===o?void 0:o.rows)||null,l=d&&d.find((function(e){return e.url==="/".concat(t)}))||null,e.next=4,c.getters["workspaces/get"]("workspaceSettingsUpdated");case 4:if(m=e.sent,l&&(!d||0!==d.length)&&d&&!m){e.next=9;break}return e.next=8,c.dispatch("workspaces/getWorkspaces",{communityId:r,query:{url:t}});case 8:d=(null===(f=c.getters["workspaces/get"]("workspaces"))||void 0===f?void 0:f.rows)||d;case 9:return e.next=11,c.dispatch("community/getCommunityMemberByUserId",{id:r,user:n});case 11:if((v=l)||(v=d?d[0]:d),v){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,c.dispatch("workspaces/workspaceSettingsUpdated",!1);case 17:return e.next=19,c.dispatch("community/setSelectedWorkspace",v);case 19:return e.abrupt("return",v);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,r){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(regeneratorRuntime.mark((function e(t,r,c){var m,f,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.dispatch("workspaces/getAmountOfWorkspacesByUser",{onlyCount:!0});case 2:if((m=c.getters["workspaces/get"]("workspaceMemberByUser"))&&(!m||m.user===r)){e.next=6;break}return e.next=6,c.dispatch("workspaces/workspaceMemberByUser",{id:t,query:{user:r}});case 6:if(0===(m=c.getters["workspaces/get"]("workspaceMemberByUser")).count){e.next=22;break}return m=m.rows.find((function(e){return e.user===r})),e.next=11,c.dispatch("workspaces/setWorkspaceMember",m);case 11:if(f=[],m&&m.groups.forEach((function(e){f.push.apply(f,Object(n.a)(e.permissions))})),v=c.getters["workspaces/get"]("memberPermissions",[]),Object(l.a)(v,f)){e.next=22;break}return e.next=17,c.dispatch("workspaces/setProperty",{prop:"memberPermissions",value:f});case 17:return e.next=19,Object(o.a)(c,(x=void 0,y=void 0,k=void 0,w=void 0,A=void 0,O=void 0,x=[{target:"moderator",section:"assets",role:d.V.ASSET_MODERATOR,private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"uploadAsset",section:"assets",role:d.V.ASSETS_NEW,private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"addOwnedAssets",section:"assets",role:d.V.WORKSPACE_OWNED_ASSET_ADD,private:!1,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"showAssets",role:d.V.ASSETS_SHOW,section:"assets",private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"approveAsset",role:d.V.ASSET_APPROVAL_NEW,section:"assets",private:!1,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"publishAsset",role:d.V.ASSETS_PUBLISH,section:"assets",private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"putAssetOnSale",role:d.V.ASSETS_UPDATE,section:"assets",private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"mintAsset",role:d.V.ASSETS_UPDATE,section:"assets",private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"assetTransferOwnership",role:d.V.WORKSPACE_TRANSFER_ASSET_OWNERSHIP,section:"assets",private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"requestApproval",role:d.V.ASSET_APPROVAL_CREATE,section:"assets",private:!1,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"moveAssetToVerify",role:d.V.ASSETS_MOVE_VERIFY,section:"assets",private:!1,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"deleteAsset",role:d.V.ASSETS_DESTROY,section:"assets",private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"rejectAsset",role:d.V.ASSETS_SEND_ITERATE,section:"assets",private:!1,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"sendAssetToIterate",role:d.V.ASSETS_SEND_ITERATE,section:"assets",private:!1,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"viewAssetHistory",role:d.V.ASSETS_VIEW_HISTORY,section:"assets",private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"editAsset",role:d.V.ASSETS_UPDATE,section:"assets",private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"restoreAsset",role:d.V.ASSETS_RESTORE,section:"assets",private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1}],y=[{target:"manageMembers",role:d.V.ROLES_EDIT,private:!1,section:"roles",overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"addRoles",role:d.V.ROLES_NEW,private:!1,section:"roles",overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"editRoles",role:d.V.ROLES_EDIT,private:!1,section:"roles",overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"deleteRoles",role:d.V.ROLES_DESTROY,private:!1,section:"roles",overwriteByAdmin:!0,checkCommunityAdmin:!1}],k=[{target:"addMember",role:d.V.USERS_CREATE,private:!1,section:"members",overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"editMember",role:d.V.USERS_EDIT,private:!1,section:"members",overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"banUnbanMember",role:d.V.USERS_UPDATE,private:!1,section:"members",overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"deleteMember",role:d.V.USERS_DESTROY,private:!1,section:"members",overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"editMember",role:d.V.USERS_EDIT,private:!1,section:"members",overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"userShowRoles",role:d.V.ROLES_SHOW,private:!1,section:"members",overwriteByAdmin:!0,checkCommunityAdmin:!1}],w=[{target:"newInvite",role:d.V.WORKSPACE_INVITE_CREATE,private:!1,section:"invites",overwriteByAdmin:!0,checkCommunityAdmin:!1},{target:"deleteInvite",role:d.V.WORKSPACE_INVITE_DESTROY,private:!1,section:"invites",overwriteByAdmin:!0,checkCommunityAdmin:!1}],A=[{target:"update",role:d.V.WORKSPACE_UPDATE,private:!0,section:"settings",overwriteByAdmin:!0,checkCommunityAdmin:!1}],O=[{target:"admin",role:d.V.WORKSPACE_ADMIN,private:!0,overwriteByAdmin:!0,checkCommunityAdmin:!1}],[].concat(x,k,w,y,A,O)),{id:r},!1);case 19:return h=e.sent,e.next=22,c.dispatch("workspaces/workspaceActionsAllowed",h);case 22:case"end":return e.stop()}var x,y,k,w,A,O}),e)})))).apply(this,arguments)}function w(e){return e.getters["user/getUser"]}t.default=Object(m.c)(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,d,path,l,m,v,x,k,A,O,S,_,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.redirect,n=t.params,c=t.store,o=t.route,d=o.fullPath,path=o.path,e.prev=2,v=!!w(c),x=w(c),v){e.next=7;break}return e.abrupt("return",r({path:"/sign/",query:{redirectTo:encodeURIComponent(d)}}));case 7:if(n.workspaceUrl&&n.communityUrl){e.next=9;break}return e.abrupt("return",r("/"));case 9:if(!(k=path.split("/")).includes("roles")&&!k.includes("invitations")){e.next=13;break}return k=k.splice(2,5).concat("assets").join("/"),e.abrupt("return",r("/".concat(k)));case 13:if(l=c.getters["community/get"]("selectedCommunity"),m=c.getters["community/get"]("selectedWorkspace"),(!l||l.url==="/".concat(n.communityUrl))&&l){e.next=30;break}return e.next=18,f(n.communityUrl,c);case 18:if(A=e.sent){e.next=21;break}return e.abrupt("return",r("/"));case 21:return e.next=23,h(n.workspaceUrl,A.id,x.id,c);case 23:if(O=e.sent){e.next=26;break}return e.abrupt("return",r("/communities/".concat(n.communityUrl,"/")));case 26:return e.next=28,y(O.id,x.id,c);case 28:case 41:e.next=48;break;case 30:if((!m||m.url==="/".concat(n.workspaceUrl))&&m){e.next=43;break}return e.next=33,c.getters["community/get"]("selectedCommunity");case 33:return S=e.sent,e.next=36,h(n.workspaceUrl,S.id,x.id,c);case 36:if(_=e.sent){e.next=39;break}return e.abrupt("return",r("/communities/".concat(n.communityUrl,"/")));case 39:return e.next=41,y(_.id,x.id,c);case 43:return e.next=45,c.getters["community/get"]("selectedWorkspace");case 45:return E=e.sent,e.next=48,y(E.id,x.id,c);case 48:e.next=54;break;case 50:return e.prev=50,e.t0=e.catch(2),console.error("Error catched",e.t0),e.abrupt("return",r("/communities/".concat(n.communityUrl,"/")));case 54:case"end":return e.stop()}}),e,null,[[2,50]])})));return function(t){return e.apply(this,arguments)}}())},1159:function(e,t,r){"use strict";r(741)},1160:function(e,t,r){var n=r(241)((function(i){return i[1]}));n.push([e.i,'.container[data-v-8a293fc6]{width:100%}.container .container-error[data-v-8a293fc6]{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;margin-bottom:50px;width:100%}.container .container-error img[data-v-8a293fc6]{width:350px}.container .container-error h1[data-v-8a293fc6]{margin-bottom:5px}.container .container-error p[data-v-8a293fc6]{margin-bottom:25px;margin-top:5px}.container .error[data-v-8a293fc6]{align-items:flex-start;background-image:url(/img/00_General/Grid-Map.png);background-size:contain;display:flex;flex-direction:column;height:100vh;justify-content:flex-start;padding-left:5%;padding-top:20%;text-align:center}@media(min-width:0px)and (max-width:767px){.container .error[data-v-8a293fc6]{padding-left:0;padding-top:0}}@media(min-width:768px)and (max-width:1279px){.container .error[data-v-8a293fc6]{padding-left:0;padding-top:0}}.container .device-not-supported[data-v-8a293fc6]{align-items:center;background:url(/img/26_Season/Alpha_3/not-supported/bg@2x.png) 50% 50% no-repeat;background-size:cover;box-sizing:border-box;display:flex;flex-direction:column;height:100vh;justify-content:center;padding:1em}@media(min-width:768px)and (max-width:1279px){.container .device-not-supported[data-v-8a293fc6]{background:url(/img/26_Season/Alpha_3/not-supported/bg.png) 50% 50% no-repeat;background-size:cover}}.container .device-not-supported .device-not-supported-container[data-v-8a293fc6]{align-items:center;background-color:#202429;border-radius:10px;display:flex;flex-direction:column;justify-content:center;max-width:420px;width:100%}.container .device-not-supported .device-not-supported-container img[data-v-8a293fc6]{margin-top:-100px;width:100%}@media(min-width:0px)and (max-width:767px){.container .device-not-supported .device-not-supported-container img[data-v-8a293fc6]{margin-top:-95px}}@media(min-width:0px)and (max-width:900px)and (orientation:landscape){.container .device-not-supported .device-not-supported-container[data-v-8a293fc6]{flex-direction:row;max-width:770px}.container .device-not-supported .device-not-supported-container img[data-v-8a293fc6]{border-bottom-left-radius:10px;border-top-left-radius:10px;height:100%;margin:0}}.container .device-not-supported .device-not-supported-container .device-info[data-v-8a293fc6]{align-items:center;display:flex;flex-direction:column;justify-content:space-between;padding:40px 60px;width:100%}@media(min-width:0px)and (max-width:767px){.container .device-not-supported .device-not-supported-container .device-info[data-v-8a293fc6]{padding:40px}}.container .device-not-supported .device-not-supported-container .device-info h2[data-v-8a293fc6]{color:#fff;font-family:"Montserrat Bold","Arial Black",sans-serif;font-size:20px;line-height:24px;margin:0 0 12px;text-align:center}.container .device-not-supported .device-not-supported-container .device-info span[data-v-8a293fc6]{color:#fff;font-family:"Montserrat Medium","Verdana",sans-serif;font-size:14px;line-height:20px;margin-bottom:28px;text-align:center}.container .device-not-supported .device-not-supported-container .device-info button[data-v-8a293fc6]{color:#fff;font-family:"Montserrat Bold","Arial Black",sans-serif;font-size:15px;line-height:19px;max-height:36px;max-width:100%;min-height:36px;min-width:100%;text-align:center}.container .terms-and-conditions[data-v-8a293fc6]{align-items:center;background:url(/img/00_General/terms-and-conditions.png);background-size:cover;display:flex;flex-direction:column;height:100vh;justify-content:center;width:100%}.container .terms-and-conditions .info-wrapper[data-v-8a293fc6]{align-items:flex-start;display:flex;flex-direction:column;justify-content:center;max-width:80%}.container .terms-and-conditions .info-wrapper img[data-v-8a293fc6]{margin-bottom:40px;width:180px}.container .terms-and-conditions .info-wrapper p[data-v-8a293fc6]{color:#fff;font-family:"Montserrat Regular","Verdana",sans-serif;font-size:20px;line-height:22px;margin-bottom:55px;text-align:left}@media(min-width:0px)and (max-width:767px){.container .terms-and-conditions .info-wrapper[data-v-8a293fc6]{align-items:center;display:flex;flex-direction:column;justify-content:center}.container .terms-and-conditions .info-wrapper p[data-v-8a293fc6]{font-size:15px}}',""]),n.locals={},e.exports=n},211:function(e,t,r){"use strict";r.r(t);r(10),r(11),r(12),r(13),r(18),r(64);var n={components:{CustomButton:r(565).default},props:{error:{type:Object,default:null},incompatible:{type:Boolean,default:!1},termsAndConditions:{type:Boolean,default:!1},settings:{type:Object,default:null}},emits:["go-back"]},c=(r(1159),r(134)),component=Object(c.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[e.error&&404===e.error.statusCode?t("div",{staticClass:"container-error"},[t("h1",[e._v("Error 404")]),e._v(" "),t("i18n-t",{staticClass:"mb-3",attrs:{keypath:"layout.errorPage.description",tag:"span"},scopedSlots:e._u([{key:"discord",fn:function(){return[t("a",{attrs:{href:"https://discord.gg/thesandboxgame",target:"_blank",rel:"noopener noreferrer"}},[e._v(e._s(e.$t("layout.errorPage.discord")))])]},proxy:!0}],null,!1,2559980098)}),e._v(" "),t("NuxtImg",{attrs:{src:"/img/00_General/Enchufe.png",alt:""}}),e._v(" "),t("CustomButton",{attrs:{medium:"",url:"/"}},[e._v("\n      "+e._s(e.$t("common.goToHome"))+"\n    ")])],1):e.incompatible?t("div",{staticClass:"device-not-supported"},[t("div",{staticClass:"device-not-supported-container"},[t("NuxtImg",{attrs:{src:"/img/26_Season/Alpha_3/not-supported/logo.png",alt:"Sandbox Alpha Season 3 logo"}}),e._v(" "),t("div",{staticClass:"device-info"},[t("h2",[e._v(e._s(e.$t(e.settings.title)))]),e._v(" "),t("span",[e._v("\n          "+e._s(e.$t(e.settings.description))+"\n        ")]),e._v(" "),t("CustomButton",{staticClass:"back-home-button",attrs:{small:""},on:{click:function(t){return e.$router.pushToLocale(e.settings.buttonRoute)}}},[e._v("\n          "+e._s(e.$t(e.settings.buttonText))+"\n        ")])],1)],1)]):e.termsAndConditions?t("div",{staticClass:"terms-and-conditions"},[t("div",{staticClass:"info-wrapper"},[t("NuxtImg",{attrs:{alt:"The Sandbox",src:"/img/01_Top_Bar/TheSandboxLogo.svg"}}),e._v(" "),t("p",[e._v(e._s(e.$t("layout.termsAndConditions.error")))]),e._v(" "),t("CustomButton",{staticClass:"btn-custom mr-2",attrs:{small:""},on:{click:function(t){return e.$emit("go-back")}}},[e._v("\n        "+e._s(e.$t("layout.termsAndConditions.goBack"))+"\n      ")])],1)]):t("div",{staticClass:"container-error"},[t("h1",[e._v(e._s(e.$t("layout.errorPage.title")))]),e._v(" "),t("i18n-t",{staticClass:"mb-3",attrs:{keypath:"layout.errorPage.description",tag:"span"},scopedSlots:e._u([{key:"discord",fn:function(){return[t("a",{attrs:{href:"https://discord.gg/thesandboxgame",target:"_blank",rel:"noopener noreferrer"}},[e._v(e._s(e.$t("layout.errorPage.discord")))])]},proxy:!0}])}),e._v(" "),t("NuxtImg",{attrs:{src:"/img/00_General/fe-error.png",alt:"An error occurred"}}),e._v(" "),t("CustomButton",{attrs:{small:"",color:"primary",url:"/"}},[e._v("\n      "+e._s(e.$t("common.goToHome"))+"\n    ")])],1)])}),[],!1,null,"8a293fc6",null);t.default=component.exports},741:function(e,t,r){var content=r(1160);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(242).default)("d8df0944",content,!0,{sourceMap:!1})},917:function(e,t,r){"use strict";r.r(t);r(10),r(11),r(12),r(13),r(174),r(38),r(75);var n=r(23);t.default=Object(n.c)((function(e){var t=e.route,r=e.redirect,n=t.query,path=t.path;if(!path.endsWith("/")){return r(301,{query:n,path:path.replace(/(\/\/+)/,"/")+"/"})}}))},940:function(e,t,r){"use strict";r.r(t);r(10),r(11),r(12),r(13),r(7),r(31);var n=r(23);t.default=Object(n.c)((function(e){var t=e.route,r=e.redirect,n=e.app,c=t.matched,o=t.fullPath,d=n.i18n.locale||"en",l=n.i18n.locales.some((function(element){return"/".concat(element.code,"/")===o.substring(0,element.code.length+2)}));return l&&0===c.length?r("/"):l?void 0:r("/".concat(d).concat(o))}))},941:function(e,t,r){"use strict";r.r(t);r(17),r(18),r(20),r(7),r(22),r(15),r(21);var n=r(4),c=r(0),o=(r(10),r(11),r(12),r(13),r(9),r(133)),d=r(16),l=r(390),m=r(23),f=r(271),v=r.n(f);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=Object(m.c)(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,c,m,f,h,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,n=t.req,c=t.res,e.abrupt("return");case 3:return m=new v.a(n,c),f=m.get("tsb_".concat(d.cookiePrefix,"_token")),h=n.headers?n.headers["tsb-x-override-ff-trait"]:null,y={Cache:"no-cache"},o.a.defaults.headers=f?x(x({},y),{},{Authorization:"Bearer ".concat(f)}):y,h&&(o.a.defaults.headers=x(x({},o.a.defaults.headers),{},{"tsb-x-override-ff-trait":h})),e.next=11,Object(l.a)(r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]);