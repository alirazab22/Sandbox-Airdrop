/*!
    Stamping Service 1.0.28
    Solid State Networks. All rights reserved.
*/
function DirectDlmError(){this.ID_NOT_SET=1,this.DATA_NOT_SET=2,this.REQUEST_TIMEOUT=3}var directDlmError=new DirectDlmError;function DirectDlm(requestType){this.url="",this.items=[],this.filename="DownloadManager",this.analytics=null,this.config=null,this.defaultApiUrl="https://stamp.directdlm.com/stamp/",this.apiUrl=this.defaultApiUrl,this.authParam=null,this.requestTimeout=0,this.onUpdate=null,this.onError=function(errorCode){var message="Unknown error code "+errorCode;errorCode==directDlmError.ID_NOT_SET?message="Your operating system is not supported.":errorCode==directDlmError.DATA_NOT_SET?message="Data required for request.":errorCode==directDlmError.REQUEST_TIMEOUT&&(message="Request for download manager timed out."),alert(message)},this.setRequestType(requestType)}DirectDlm.prototype.setName=function(name){this.name=name,this.update(!0)},DirectDlm.prototype.getName=function(){return this.name},DirectDlm.prototype.setIdWin=function(id){this.winId=id,this.update(!0)},DirectDlm.prototype.setIdMac=function(id){this.macId=id,this.update(!0)},DirectDlm.prototype.setIdLinux=function(id){this.linuxId=id,this.update(!0)},DirectDlm.prototype.getCurrentId=function(){var os=this.os;return-1!=(os="string"==typeof os&&-1==os.indexOf("auto")?os:navigator.appVersion.toLowerCase()).indexOf("win")?this.winId:-1!=os.indexOf("mac")?this.macId:this.linuxId},DirectDlm.prototype.setOS=function(os){this.os=os.toLowerCase(),this.update(!0)},DirectDlm.prototype.setApiUrl=function(apiUrl){this.apiUrl=apiUrl,this.update(!0)},DirectDlm.prototype.getApiUrl=function(){return this.apiUrl},DirectDlm.prototype.setRequestType=function(requestType){this.requestType=(requestType=void 0===requestType?"POST":requestType).toUpperCase(),this.update(!0)},DirectDlm.prototype.getRequestType=function(){return this.requestType},DirectDlm.prototype.setRequestTimeout=function(requestTimeout){this.requestTimeout=requestTimeout},DirectDlm.prototype.getRequestTimeout=function(){return this.requestTimeout},DirectDlm.prototype.setFilename=function(filename){this.filename=filename,this.update(!0)},DirectDlm.prototype.getFilename=function(filename){return this.filename},DirectDlm.prototype.getCurrentFilename=function(){var os=this.os,filename=this.filename,os=-1!=(os="string"==typeof os&&-1==os.indexOf("auto")?os:navigator.appVersion.toLowerCase()).indexOf("win")?".exe":-1!=os.indexOf("mac")?".dmg":".run";return"string"==typeof filename&&-1==filename.indexOf(os)&&(filename+=os),filename},DirectDlm.prototype.setAggregate=function(aggregate){this.aggregate=aggregate,this.update(!0)},DirectDlm.prototype.setDataType=function(dataType){this.dataType=dataType,this.update(!0)},DirectDlm.prototype.getAnalytics=function(){return this.analytics},DirectDlm.prototype.setAnalytics=function(data){this.analytics=data,this.update(!0)},DirectDlm.prototype.getConfig=function(){return this.config},DirectDlm.prototype.setConfig=function(config){this.config=config,this.update(!0)},DirectDlm.prototype.setTlsRequirement=function(tlsRequirement){"1.2"==tlsRequirement||1.2==tlsRequirement?this.setApiUrl("https://stamptls2.directdlm.com/stamp/"):this.setApiUrl(this.defaultApiUrl),this.update(!0)},DirectDlm.prototype.setAuthParam=function(authParam){this.authParam=authParam,this.update(!0)},DirectDlm.prototype.addItem=function(obj,name){var item={};"string"==typeof obj?-1!=obj.indexOf("/")?item.url=obj.trim():item.repository=obj.trim():"object"==typeof obj&&(item=obj),void 0!==name&&(item.name=name.trim()),this.items.push(item),this.dataType="items",this.update(!0)},DirectDlm.prototype.addItems=function(items,separator){"string"==typeof items&&(items=items.split(separator=void 0===separator?"\n":separator));for(var i=0;i<items.length;i+=1){var item={};"string"==typeof items[i]?-1!=items[i].indexOf("/")?item.url=items[i].trim():item.repository=items[i].trim():item=items[i],"name"in item&&(item.name=item.name.trim()),this.items.push(item)}this.dataType="items",this.update(!0)},DirectDlm.prototype.getItems=function(){return this.items},DirectDlm.prototype.setItems=function(items){for(var cleanItems=[],i=0;i<items.length;i+=1){var name,cleanItem={};for(name in items[i])items[i].hasOwnProperty(name)&&"$$hashKey"!=name&&(cleanItem[name]=items[i][name]);cleanItems.push(cleanItem)}this.items=cleanItems,this.dataType="items",this.update(!0)},DirectDlm.prototype.clearItems=function(){this.items=[],this.update(!0)},DirectDlm.prototype.setRawData=function(data){this.rawData=data,this.dataType="raw",this.update(!0)},DirectDlm.prototype.getRawData=function(){return this.rawData},DirectDlm.prototype.getData=function(encoded){return encoded?btoa(this.getDataString()):this.data},DirectDlm.prototype.getDataString=function(){return"string"!=typeof this.data?JSON.stringify(this.data).replace(/[\u007F-\uFFFF]/g,function(chr){return"\\u"+("0000"+chr.charCodeAt(0).toString(16)).substr(-4)}):this.data},DirectDlm.prototype.update=function(ignoreError){var id=this.getCurrentId();if(!id&&!0!==ignoreError)return this.onError(directDlmError.ID_NOT_SET),!1;if(void 0!==this.rawData&&"raw"==this.dataType)this.data=this.rawData;else{var items=[];if(0<this.items.length&&(items=this.items.slice(0)),void 0!==this.name&&0<items.length&&!items[0].hasOwnProperty("name")&&(items[0].name=this.name),!0===this.aggregate)this.data={downloadUrl:items};else if(1==this.items.length)this.data=items[0];else if(1<this.items.length)this.data=items;else if(!0!==ignoreError&&(this.data=null,!this.analytics)&&!this.config)return this.onError(directDlmError.DATA_NOT_SET),!1;(this.analytics||this.config)&&(this.data=this.data?{items:this.data}:{},this.analytics&&(this.data.analytics=this.analytics),this.config)&&(this.data.config=this.config)}items=this.getApiUrl()+id+"/";return"GET"==this.requestType?items+=encodeURIComponent(this.getData(!0)):items+="null",items+="/"+this.getCurrentFilename(),null!=this.authParam&&(items+="?AUTHPARAM="+this.authParam),this.url=items,null==this.onUpdate||this.onUpdate(ignoreError)},DirectDlm.prototype.getUrl=function(){return this.url},DirectDlm.prototype.getEmbed=function(linkText,linkCssClass){return void 0===linkText&&(linkText="Download Now"),void 0===linkCssClass&&(linkCssClass="directdlm-link"),"GET"==this.requestType?'<a class="'+linkCssClass+'" href="'+this.getUrl()+'">'+linkText+"</a>":'<form id="directdlm-form" action="'+this.getUrl()+'"><input type="hidden" name="data" value="'+this.getData(!0)+'"><button class="'+linkCssClass+'">'+linkText+"</button></form>"},DirectDlm.prototype.download=function(){var frameId,frame,form,uniqueId,timeoutSeconds,timeoutIntervalId,self=this;return!!this.update(!1)&&(frameId="directdlm-frame-"+(uniqueId=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10)),uniqueId="directdlm-form-"+uniqueId,(frame=document.createElement("iframe")).setAttribute("name",frameId),frame.setAttribute("hidden",!0),"GET"==this.requestType?(frame.setAttribute("src",this.getUrl()),document.body.appendChild(frame)):((form=document.createElement("form")).setAttribute("id",uniqueId),form.setAttribute("method","post"),form.setAttribute("action",this.getUrl()),form.setAttribute("target",frameId),form.setAttribute("hidden",!0),(uniqueId=document.createElement("input")).setAttribute("name","data"),uniqueId.setAttribute("value",this.getData(!0)),form.appendChild(uniqueId),document.body.appendChild(frame),document.body.appendChild(form),form.submit(),this.onError&&0<this.requestTimeout&&(timeoutSeconds=this.requestTimeout,timeoutIntervalId=setInterval(function(){try{if("about:blank"!=frame.contentWindow.location.href)throw"error in frame"}catch(err){self.onError(directDlmError.REQUEST_TIMEOUT),timeoutSeconds=0}timeoutIntervalId&&--timeoutSeconds<0&&clearInterval(timeoutIntervalId)},1e3))),!0)};var createDirectDlm=function(requestType){return new DirectDlm(requestType)};"object"==typeof module&&module.exports&&(module.exports.createDirectDlm=createDirectDlm,module.exports.directDlmError=directDlmError);