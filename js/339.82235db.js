(window.webpackJsonp=window.webpackJsonp||[]).push([[339],{1314:function(e,t,r){"use strict";r.r(t),r.d(t,"state",(function(){return ue})),r.d(t,"mutations",(function(){return ie})),r.d(t,"getters",(function(){return se})),r.d(t,"actions",(function(){return Ee}));r(18),r(20),r(22),r(15),r(21);var n=r(45),c=r(4),o=r(0),l=(r(9),r(7),r(35),r(36),r(53),r(67),r(40),r(17),r(38),r(75),r(41),r(63)),d=r(119),f=r(450),m=r(521),w=r(131),h=r(16),v=r(2),x=r(28),k=r(30),R=r(3),O=r(229);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S,W=function(){return r.e(60).then(r.t.bind(null,343,7))},I=!1,U=null;function A(e,t,r){e("setState",{field:t,value:r})}function T(e,t){return P.apply(this,arguments)}function P(){return P=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]&&o[2],e.prev=1,e.next=4,Object(k.i)(t,r,n);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.message.includes("Transaction rejected")&&!localStorage.getItem("launchNeedWallet")&&(localStorage.getItem("launchNeedWallet"),null!==(c=window)&&void 0!==c&&c.$nuxt&&window.$nuxt.$mixpanel.track("dsb_connectErrorSignatureTryAgain",{provider:window.$nuxt.$store.state.user.walletType}),Object(x.b)({title:"Signature rejected"})),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),P.apply(this,arguments)}function E(){return L.apply(this,arguments)}function L(){return(L=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.e(1122).then(r.t.bind(null,1343,7));case 3:return t=e.sent,n=t.default,e.next=7,n();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function C(){return B.apply(this,arguments)}function B(){return B=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,n,c,o,l,d,f,m,w,h,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=v.length>0&&void 0!==v[0]?v[0]:"",e.next=3;break;case 3:if(U){e.next=16;break}if(r=Object(k.d)(t),e.t0=r,e.t0){e.next=10;break}return e.next=9,E();case 9:e.t0=e.sent;case 10:return n=e.t0,e.next=13,W();case 13:c=e.sent,o=c.default,n?(n.autoRefreshOnNetworkChange=!1,U=new o(n)):window.userWeb3&&(U=new o(window.userWeb3.currentProvider));case 16:if(f=localStorage.getItem("walletconnect"),m=null===(l=JSON.parse(localStorage.getItem("wc@2:client:0.3//session")))||void 0===l?void 0:l.length,w=localStorage.getItem("-walletlink:https://www.walletlink.org:session:linked"),h=null===(d=window)||void 0===d||null===(d=d.location)||void 0===d||null===(d=d.href)||void 0===d?void 0:d.includes("unlink-wallet"),!f&&!m){e.next=25;break}return e.next=24,Object(k.f)();case 24:U=e.sent;case 25:if(!w||"1"!==w||h){e.next=29;break}return e.next=28,Object(k.e)();case 28:U=e.sent;case 29:return window.builtInWeb3=U,e.abrupt("return",U);case 31:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function V(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var c=0,o=r;c<o.length;c++){if(o[c]===e.loginStatus)return!1}throw console.error("loginStatus "+e.loginStatus+" not valid here, can only be called from "+r),Error("loginStatus "+e.loginStatus+" not valid here, can only be called from "+r)}function $(){var e=1,t="mainnet";if(h.isTestEnvironment){t={1:"mainnet",4:"rinkeby",5:"goerli",137:"polygon",80001:"mumbai"}[e=h.defaultChainId]}return{httpURL:h.infura.http,chainId:e,networkName:t}}function N(){var e=$().networkName;return"goerli"===e?{network:{chainId:5,rpcUrl:h.chainsRPCs[5].http}}:{networkName:e}}function H(e){return _.apply(this,arguments)}function _(){return _=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,l,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:null,n=d.length>2&&void 0!==d[2]?d[2]:null,e.next=4,Object(O.c)(window.$nuxt.$ff);case 4:if(c=e.sent,e.prev=5,!c){e.next=12;break}return e.next=9,f.a.getWalletSecure(t,r,n);case 9:o=e.sent,e.next=15;break;case 12:return e.next=14,f.a.getWallet(t);case 14:o=e.sent;case 15:return e.abrupt("return",o&&!!o.userId);case 18:if(e.prev=18,e.t0=e.catch(5),404!==(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status)){e.next=24;break}return e.abrupt("return",!1);case 24:throw Object(x.b)({title:"An error has ocurred. Please try again."}),e.t0;case 26:case"end":return e.stop()}}),e,null,[[5,18]])}))),_.apply(this,arguments)}function M(e,t){A(e,"currentUser",t),t?(A(e,"loginStatus","LoggedIn"),localStorage.setItem("userId",t.id),window.$nuxt&&window.$nuxt.$brazeUpdateUser&&null!=t&&t.id&&window.$nuxt.$brazeUpdateUser({userId:t.id,email:t.email}),localStorage.setItem("userEmail",t.email)):(A(e,"loginStatus","LoggedOut"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"))}function F(e,t){return z.apply(this,arguments)}function z(){return(z=Object(o.a)(regeneratorRuntime.mark((function e(t,code){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=sessionStorage.getItem("social-login"),!(window&&r&&code)){e.next=14;break}return e.prev=2,e.next=5,l.a.checkSocialUserAuthenticated({code:code},r);case 5:return n=e.sent,A(t,"userInfo",n),A(t,"socialHint",r),e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",null);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function D(){return J.apply(this,arguments)}function J(){return(J=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.isLoggedIn().then((function(e){return e.data})).catch((function(){return null})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return e.Wallets&&e.Wallets.length>0?e.Wallets[0]:null}function K(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,w.c();case 4:return n=e.sent,e.next=7,w.d();case 7:return e.abrupt("return",te(t,n,r,"arkane"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S){e.next=3;break}return e.next=3,Te();case 3:return e.next=5,W();case 5:return n=e.sent,c=n.default,o=new c(S.getProvider(N())),e.abrupt("return",te(t,o,r,"bitski"));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return ee.apply(this,arguments)}function ee(){return ee=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>2&&void 0!==o[2]?o[2]:"",I){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,C(n);case 5:return c=e.sent,e.abrupt("return",te(t,c,r,"builtin"));case 7:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e,t,r,n){return re.apply(this,arguments)}function re(){return(re=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,c){var o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(t,"walletType",c),r){e.next=3;break}return e.abrupt("return");case 3:return window.userWeb3=r,A(t,"walletStatus","CheckingWallet"),e.prev=5,e.next=8,r.eth.getAccounts();case 8:o=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),o=[];case 14:return e.prev=14,e.next=17,r.eth.net.getId();case 17:l=e.sent,e.next=23;break;case 20:e.prev=20,e.t1=e.catch(14),l=r.currentProvider.chainId;case 23:return e.next=25,ne(t,l,n,o);case 25:case"end":return e.stop()}}),e,null,[[5,11],[14,20]])})))).apply(this,arguments)}function ne(e,t,r,n){return ae.apply(this,arguments)}function ae(){return(ae=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,c){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(t,"chainId",r),0!==c.length){e.next=4;break}return A(t,"walletStatus","Locked"),e.abrupt("return");case 4:o=c[0],A(t,"walletAddress",o),n&&(n.address.toLowerCase()===o.toLowerCase()?A(t,"walletStatus","Ready"):A(t,"walletStatus","WrongWalletAddress"));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue=function(){return{builtInWalletPresent:null,walletStatus:null,walletType:null,web3WalletType:null,walletAddress:null,chainId:null,walletAddressAccountless:null,needToLogoutAccountless:!1,loginStatus:null,loginType:null,currentUser:null,requireSignup:null,userInfo:null,socialHint:null,chosenWalletType:null,error:null,updateUser:{data:null,status:"success"},requestVerifyEmail:{data:null,status:"success"},verifyEmail:{data:null,status:"success"},verifyCode:{data:null,status:"success"},isEmailVerified:{data:!0,status:"success"},requestSecurityCode:{data:null,status:"success"},requestRestore:null,addWallet:null,arkaneHint:null,oauthUser:null,providerMismatch:!1,providerMismatchProvider:null,isPublisher:null,userSaved:{data:!0,status:"Loading"},settings:null}},ie=j(j({},v.c),{},{setState:function(e,t){e[t.field]=t.value}}),se=j(j({},v.b),{},{getUser:function(e){return e.currentUser},getUserInfo:function(e){return e.userInfo},getWallet:function(e){return e.currentUser&&e.currentUser.Wallets&&e.currentUser.Wallets.length>0&&e.currentUser.Wallets[0].address},getWalletAccountless:function(e){return e.walletAddressAccountless},getWalletUser:function(e){return e.walletAddress},getSocialHint:function(e){return e.socialHint},getProviderMismatch:function(e){return e.providerMismatch},getProviderMismatchProvider:function(e){return e.providerMismatchProvider},getRequireSignUp:function(e){return e.requireSignup},getUserIsPublisher:function(e){var t;return null===(t=e.isPublisher)||void 0===t?void 0:t.data}});function ce(e){if(e){var t=function(){try{return navigator.userAgent.toLowerCase()}catch(e){return""}}();return function(e){return e.includes("tokenpocket")}(t)?"tokenpocket":function(e){return e.isWombat||"wombat"===e.host}(e)?"wombat":function(e){return e.isBraveWallet}(e)?"brave":function(e){return e.isMetaMask||"metamask"===e.host}(e)?"metamask":function(e){return e.isWalletConnect||"wconnect"===e.host}(e)?"wconnect":function(e){var t;return e.isBitski||(null===(t=e.webBaseUrl)||void 0===t?void 0:t.indexOf("https://sign.bitski.com"))>=0}(e)?"bitski":e.isCoinbaseWallet?"coinbase":e.isTrust?"trust":e.isGoWallet?"goWallet":e.isAlphaWallet?"alphaWallet":e.isStatus?"status":e.isToshi?"toshi":void 0!==window.__CIPHER__?"cipher":function(e){return"EthereumProvider"===e.constructor.name}(e)?"mist":function(e){return e.includes("opera")||e.includes("opr/")||e.includes("opt/")}(t)?"opera":function(e){return function(e){return"Web3FrameProvider"===e.constructor.name}(e)?"parity":function(e){return e.host&&-1!==e.host.indexOf("infura")}(e)?"infura":function(e){return e.host&&-1!==e.host.indexOf("localhost")}(e)?"localhost":void 0}(e)}}function oe(e,t,r,n){return le.apply(this,arguments)}function le(){return le=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,c){var o,d,f,address,m,h,v,x,R,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.state,d=t.commit,f=t.dispatch,!o.currentUser){e.next=3;break}throw new Error(n+" Invalid state.");case 3:if(e.prev=3,A(d,"walletType",c),r){e.next=7;break}return e.abrupt("return");case 7:return window.userWeb3=r,e.next=10,Object(k.l)();case 10:return address=e.sent,A(d,"walletAddress",address),e.next=14,pe(address);case 14:if(m=e.sent,h=m.previouslySignedUp,v=m.challenge,x=m.signature,A(d,"requireSignup",!h),h){e.next=26;break}if("arkane"!==c){e.next=25;break}return e.next=23,w.a();case 23:R=e.sent,A(d,"arkaneUser",R);case 25:throw new Error("Wallet not registered");case 26:return e.next=28,Object(O.c)(window.$nuxt.$ff);case 28:if(e.sent){e.next=37;break}return e.next=32,l.a.loginBuiltInRequest(address).then((function(e){return e.data}));case 32:return v=e.sent,e.next=35,T(v,address);case 35:y=e.sent,x=y.signature;case 37:return e.next=39,l.a.loginBuiltInVerify(address,x,v,c);case 39:return A(d,"requireSignup",!1),e.abrupt("return",f("loadUser",!0));case 43:throw e.prev=43,e.t0=e.catch(3),A(d,"error",{message:n,error:e.t0.toString()}),e.t0;case 47:case"end":return e.stop()}}),e,null,[[3,43]])}))),le.apply(this,arguments)}function pe(e){return de.apply(this,arguments)}function de(){return(de=Object(o.a)(regeneratorRuntime.mark((function e(address){var t,r,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)(window.$nuxt.$ff);case 2:if(!e.sent){e.next=16;break}return e.next=6,l.a.loginBuiltInRequest(address).then((function(e){return e.data}));case 6:return r=e.sent,e.next=9,T(r,address);case 9:return c=e.sent,n=c.signature,e.next=13,H(address,r,n);case 13:t=e.sent,e.next=19;break;case 16:return e.next=18,H(address);case 18:t=e.sent;case 19:return e.abrupt("return",{previouslySignedUp:t,challenge:r,signature:n});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t,r,n,c){return ge.apply(this,arguments)}function ge(){return ge=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,c,o){var d,f,m,address,w,h,v,x,R,O,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=t.state,f=t.commit,m=t.dispatch,!d.currentUser){e.next=3;break}throw new Error(n+" Invalid state.");case 3:if(e.prev=3,A(f,"walletType",c),window.userWeb3=r,e.t0=o,e.t0){e.next=11;break}return e.next=10,Object(k.l)();case 10:e.t0=e.sent;case 11:return address=e.t0,A(f,"walletAddress",address),e.next=15,pe(address);case 15:if(w=e.sent,h=w.previouslySignedUp,v=w.challenge,x=w.signature,A(f,"requireSignup",!h),!h){e.next=28;break}return e.next=23,l.a.loginBuiltInVerify(address,x,v,c);case 23:return m("setTempUser",{address:null}),A(f,"requireSignup",!1),e.abrupt("return",m("loadUser",!0));case 28:return e.next=30,l.a.loginAccountlessRequest(address).then((function(e){return e.data}));case 30:return R=e.sent,e.next=33,T(R,address);case 33:return O=e.sent,y=O.signature,e.next=37,l.a.loginAccountlessVerify(address,y,R);case 37:m("setTempUser",{address:address});case 38:e.next=44;break;case 40:throw e.prev=40,e.t1=e.catch(3),A(f,"error",{message:n,error:e.t1.toString()}),e.t1;case 44:case"end":return e.stop()}}),e,null,[[3,40]])}))),ge.apply(this,arguments)}function me(e,t,r,n,c){return we.apply(this,arguments)}function we(){return(we=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,c,o){var d,f,m,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=t.commit,e.prev=1,A(d,"walletType",c),window.userWeb3=r,A(d,"walletAddress",o),e.next=7,l.a.loginAccountlessRequest(o).then((function(e){return e.data}));case 7:return f=e.sent,e.next=10,T(f,o);case 10:return m=e.sent,w=m.signature,e.next=14,l.a.loginAccountlessVerify(o,w,f);case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(1),A(d,"error",{message:n,error:e.t0.toString()}),e.t0;case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function be(e,t,r,n,c,o){return he.apply(this,arguments)}function he(){return he=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,c,o,d){var f,m,address,w,h,v,x,k,R,O,y,j,S,W;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.commit,m=t.state,address=d.address,w=d.username,h=d.email,v=d.password,x=d.utm_data,k=d.token,m.requireSignup){e.next=4;break}throw new Error(n+" Invalid state.");case 4:return e.prev=4,A(f,"walletType",c),window.userWeb3=r,R=address||m.walletAddress,e.next=10,l.a.signupBuiltInRequest({username:w,email:h,address:R,password:v,utm_data:x});case 10:return O=e.sent,y=O.data,A(f,"loginStatus","WaitingSignupSignature"),e.next=15,T(y,R,!0);case 15:return j=e.sent,S=j.signature,A(f,"loginStatus",c+"SigningUp"),e.next=20,l.a.signupBuiltInVerify({challenge:y,signature:S,address:R,username:w,email:h,type:o,password:v,utm_data:x,captcha_token:k});case 20:W=e.sent,M(f,W),A(f,"walletType",c),A(f,"loginStatus","LoggedIn"),e.next=31;break;case 26:throw e.prev=26,e.t0=e.catch(4),A(f,"error",{code:"1",message:n,error:e.t0.toString()}),A(f,"loginStatus",c+"FillSignUpInfo"),e.t0;case 31:case"end":return e.stop()}}),e,null,[[4,26]])}))),he.apply(this,arguments)}function ve(e,t,r,n){return xe.apply(this,arguments)}function xe(){return xe=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,c){var o,d,address,f,m,w,h,v,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.state,d=t.commit,o.currentUser){e.next=3;break}throw new Error(n+" Invalid state.");case 3:return e.prev=3,A(d,"walletType",c),window.userWeb3=r,e.next=8,Object(k.l)();case 8:return address=e.sent,A(d,"walletAddress",address),e.next=12,pe(address);case 12:if(f=e.sent,m=f.previouslySignedUp,w=f.challenge,h=f.signature,!m){e.next=19;break}throw Object(x.b)({title:"Wallet already registered"}),new Error("Wallet already registered");case 19:return e.next=21,Object(O.c)(window.$nuxt.$ff);case 21:if(e.sent){e.next=30;break}return e.next=25,l.a.addBuiltInRequest({address:address}).then((function(e){return e.data}));case 25:return w=e.sent,e.next=28,T(w,address);case 28:v=e.sent,h=v.signature;case 30:return e.next=32,l.a.addBuiltInVerify({challenge:w,signature:h,address:address,walletType:c});case 32:return A(d,"walletType",c),e.next=35,D();case 35:R=e.sent,M(d,R),Object(x.f)({title:"Wallet connected!",duration:3e3}),e.next=44;break;case 40:throw e.prev=40,e.t0=e.catch(3),A(d,"error",{message:n,error:e.t0.toString()}),e.t0;case 44:case"end":return e.stop()}}),e,null,[[3,40]])}))),xe.apply(this,arguments)}function ke(e,t,r,n,c,o,l){return Re.apply(this,arguments)}function Re(){return Re=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,c,o,l,d){var f,m,w,h,v,R,O,y,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.state,m=t.commit,!f.currentUser){e.next=3;break}throw new Error(n+" Invalid state.");case 3:return e.prev=3,A(m,"walletType",c),e.next=7,r();case 7:if(w=e.sent){e.next=10;break}throw new Error(c+" not initialized");case 10:return window.userWeb3=w,e.next=13,o();case 13:if(h=e.sent){e.next=16;break}throw new Error("Wallet locked");case 16:return e.next=18,Object(k.l)();case 18:if(v=e.sent){e.next=24;break}return A(m,"error",{code:"111",message:n+"Failure",error:"Wallet locked"}),A(m,"walletStatus","Locked"),Object(x.b)({title:"Wallet locked"}),e.abrupt("return");case 24:return A(m,"walletAddress",v),e.next=27,pe(v);case 27:if(R=e.sent,O=R.previouslySignedUp,A(m,"requireSignup",!O),A(m,"walletStatus","Ready"),A(m,"loginType",c),O){e.next=35;break}throw A(m,"oauthUser",h),new Error("Wallet not registered");case 35:return A(m,"loginStatus","WebWalletLoggingIn"),e.next=38,l();case 38:return y=e.sent,e.next=41,d(v,y);case 41:return e.next=43,D();case 43:j=e.sent,M(m,j),A(m,"walletType",c),A(m,"loginStatus","LoggedIn"),A(m,"loginType",c),e.next=55;break;case 50:throw e.prev=50,e.t0=e.catch(3),A(m,"error",{code:"1000",message:n+"Failed",error:e.t0.toString()}),A(m,"loginStatus","LoggedOut"),e.t0;case 55:case"end":return e.stop()}}),e,null,[[3,50]])}))),Re.apply(this,arguments)}function Oe(e,t,r,n,c,o,l){return ye.apply(this,arguments)}function ye(){return ye=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,c,o,l,d){var f,m,w,h,v,x,k,R,O,y,j,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.state,m=t.commit,w=d.email,h=d.username,v=d.password,x=d.utm_data,k=d.redirect_to,R=d.token,"email"===n||"social"===n||f.requireSignup&&f.walletType===n){e.next=4;break}throw new Error(r+" Invalid state.");case 4:return A(m,"loginStatus","WebWalletSigningUp"),e.prev=5,O=f.walletAddress,e.next=9,c();case 9:return y=e.sent,e.next=12,o();case 12:return j=e.sent,e.next=15,l({address:O,email:w,emailVerified:null==y?void 0:y.emailVerified,token:j,username:h,password:v,socialHint:f.socialHint,utm_data:x,redirect_to:k,hCaptchaToken:R});case 15:S=e.sent,M(m,S),A(m,"walletType",n),A(m,"loginStatus","LoggedIn"),A(m,"loginType",n),A(m,"requireSignup",!1),e.next=28;break;case 23:throw e.prev=23,e.t0=e.catch(5),A(m,"error",{code:"2",message:r+"Failure",error:e.t0.toString()}),A(m,"loginStatus","WebWalletFillSignUpInfo"),e.t0;case 28:case"end":return e.stop()}}),e,null,[[5,23]])}))),ye.apply(this,arguments)}function je(e,t,r,n,c,o,l){return Se.apply(this,arguments)}function Se(){return Se=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,c,o,l,d){var f,m,w,h,v,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.commit,t.state.currentUser){e.next=3;break}throw new Error("addWalletBitski Invalid state.");case 3:return e.prev=3,A(f,"walletType",c),e.next=7,r();case 7:if(m=e.sent){e.next=10;break}throw new Error(c+" not initialized");case 10:return window.userWeb3=m,e.next=13,o();case 13:return e.next=15,Object(k.l)();case 15:if(w=e.sent){e.next=21;break}return A(f,"error",{code:"111",message:n+"Failure",error:"Wallet locked"}),A(f,"walletStatus","Locked"),Object(x.b)({title:"Wallet locked"}),e.abrupt("return");case 21:return A(f,"walletAddress",w),e.next=24,pe(w);case 24:if(h=e.sent,!h.previouslySignedUp){e.next=29;break}throw Object(x.b)({title:"Wallet already registered"}),new Error("Wallet already registered");case 29:return e.next=31,l();case 31:return v=e.sent,e.next=34,d({address:w,token:v});case 34:return e.next=36,D();case 36:R=e.sent,M(f,R),A(f,"walletType",c),A(f,"loginStatus","LoggedIn"),A(f,"loginType",c),Object(x.f)({title:"Wallet connected!",duration:3e3}),e.next=48;break;case 44:throw e.prev=44,e.t0=e.catch(3),A(f,"error",{message:"addWalletBitski",error:e.t0.toString()}),e.t0;case 48:case"end":return e.stop()}}),e,null,[[3,44]])}))),Se.apply(this,arguments)}function We(e,t){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=G(r),c=r.loginType||"legacy",o=localStorage.getItem("builtInWalletName"),A(t,"loginType",c),"arkane"!==c){e.next=9;break}return e.next=7,K(t,n);case 7:case 12:case 17:case 23:case 28:e.next=32;break;case 9:if("bitski"!==c){e.next=14;break}return e.next=12,X(t,n);case 14:if("builtin"!==c){e.next=19;break}return e.next=17,Z(t,n,o);case 19:if(null==n||!n.type){e.next=32;break}if("arkane"!==n.type){e.next=25;break}return e.next=23,K(t,n);case 25:if("bitski"!==n.type){e.next=30;break}return e.next=28,X(t,n);case 30:return e.next=32,Z(t,n,o);case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=window.userWeb3)||void 0===r||!r.currentProvider||!window.userWeb3.currentProvider.isWalletConnect&&!window.userWeb3.currentProvider.isCoinbaseWallet){e.next=14;break}if(!window.userWeb3.currentProvider.isWalletConnect){e.next=6;break}return e.next=4,window.userWeb3.currentProvider.disconnect();case 4:e.next=14;break;case 6:if(!window.userWeb3.currentProvider.isCoinbaseWallet){e.next=12;break}if(t){e.next=10;break}return e.next=10,window.userWeb3.currentProvider.close();case 10:e.next=14;break;case 12:return e.next=14,window.userWeb3.currentProvider.close();case 14:localStorage.getItem("-walletlink:https://www.walletlink.org:Addresses")&&localStorage.removeItem("-walletlink:https://www.walletlink.org:Addresses");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(152),r.e(226),r.e(613),r.e(694),r.e(695),r.e(618),r.e(750),r.e(1128),r.e(1129),r.e(634)]).then(r.bind(null,1335));case 2:t=e.sent,n=t.Bitski,c=t.AuthenticationStatus,"30e9789f-dfb6-4dcc-a811-1eae1290f892","https://www.sandbox.game",S=new n("30e9789f-dfb6-4dcc-a811-1eae1290f892","https://www.sandbox.game/callback.html",["offline","email"]),window.bitski=S,window.AuthenticationStatus=c;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ee={setTempUser:function(e,t){A(e.commit,"walletAddressAccountless",t.address)},setRequireSignUp:function(e,t){A(e.commit,"requireSignup",t)},setWalletUser:function(e,t){A(e.commit,"walletAddress",t.address)},setNeedToLogoutAccountless:function(e,t){A(e.commit,"needToLogoutAccountless",t.needToLogout)},acknowledgeError:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A(e.commit,"error",null);case 2:case"end":return t.stop()}}),t)})))()},checkAndUpdateUserLoginStatus:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatch("loadUser",!0);case 1:case"end":return t.stop()}}),t)})))()},loadSocialUser:function(e,t){var r=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var code,c,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return code=t.code,A(c=e.commit,"requireSignup",!1),n.next=6,F(c,code);case 6:if(o=n.sent){n.next=11;break}return console.error("Something went wrong while retrieving your social info. Please try again later"),r.$router.pushToLocale("/"),n.abrupt("return");case 11:if(!o.providerMismatch){n.next=15;break}return A(c,"providerMismatch",!0),A(c,"providerMismatchProvider",o.provider),n.abrupt("return");case 15:if(A(c,"oauthUser",o),A(c,"walletType","social"),A(c,"loginType","social"),sessionStorage.removeItem("social-login-code"),sessionStorage.removeItem("social-login"),o.userId){n.next=24;break}return A(c,"requireSignup",!0),A(c,"loginStatus","SocialSigningUp"),n.abrupt("return");case 24:e.dispatch("loadUser",!1);case 25:case"end":return n.stop()}}),n)})))()},detectBuiltinWalletPresent:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c,o,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.commit,c=localStorage.getItem("builtinWalletName"),o=Object(k.d)(c),t.t0=o,t.t0){t.next=8;break}return t.next=7,E();case 7:t.t0=t.sent;case 8:return l=t.t0,d=null===(r=JSON.parse(localStorage.getItem("wc@2:client:0.3//session")))||void 0===r?void 0:r.length,(l||d)&&(I=!0,A(n,"builtInWalletPresent",!0),A(n,"web3WalletType",ce(l))),t.abrupt("return",l);case 12:case"end":return t.stop()}}),t)})))()},loadEIP6963Providers:function(){Object(k.j)()},connectToWeb3:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c,l,d,f,m,w,h,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=e.dispatch,t.next=4,C(localStorage.getItem("builtinWalletName"));case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=null;case 8:if(c=t.t0,l="none",!c){t.next=20;break}return t.next=13,n("detectBuiltinWalletPresent");case 13:d=t.sent,d&&"function"==typeof d.on&&d.on("chainChanged",Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.eth.net.getId();case 2:t=e.sent,A(r,"chainId",t);case 4:case"end":return e.stop()}}),e)})))),window.userWeb3=c,l=ce(c.currentProvider),t.next=30;break;case 20:return f=$(),m=f.httpURL,w=f.chainId,t.next=24,W();case 24:h=t.sent,v=h.default,window.userWeb3=new v(m),A(r,"chainId",w);case 28:I=!1,A(r,"builtInWalletPresent",!1);case 30:return A(r,"web3WalletType",l),t.next=34,new Promise((function(e){return setTimeout(e,0)}));case 34:window.$nuxt&&window.$nuxt.$gtmEvent({event:"web3Wallet",web3Wallet:l});case 35:case"end":return t.stop()}}),t)})))()},loadUser:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,D();case 2:if(n=r.sent,c=e.commit,t){r.next=11;break}if(A(c,"loginStatus","Loading"),A(c,"walletStatus","Loading"),r.t0=n,!r.t0){r.next=11;break}return r.next=11,e.dispatch("connectToWeb3");case 11:if(!n){r.next=19;break}return M(c,n),window.$nuxt&&window.$nuxt.$gtmEvent({event:"userReconnected",userId:n.id,userName:n.username,userEmal:n.email,loginType:n.loginType}),A(c,"loginStatus","LoggedIn"),r.next=17,We(c,n);case 17:r.next=23;break;case 19:return A(c,"loginStatus","LoggedOut"),M(c,null),r.next=23,Z(c);case 23:case"end":return r.stop()}}),r)})))()},loginWithBitski:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S){t.next=3;break}return t.next=3,Te();case 3:return t.abrupt("return",ke(e,Object(o.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return t=e.sent,r=t.default,e.abrupt("return",new r(S.getProvider(N())));case 5:case"end":return e.stop()}}),e)}))),"loginWithBitski","bitski",(function(){return S.signIn()}),(function(){return S.authProvider.getAccessToken()}),l.a.loginBitski));case 4:case"end":return t.stop()}}),t)})))()},loginWithWConnect:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.f)();case 2:return r=t.sent,t.abrupt("return",oe(e,r,"loginWithWConnect","wconnect"));case 4:case"end":return t.stop()}}),t)})))()},loginWithBuiltIn:function(e){var t=arguments;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:null,r.next=3,C(n);case 3:return c=r.sent,localStorage.setItem("builtinWalletName",n),r.abrupt("return",oe(e,c,"loginWithBuiltIn","builtin"));case 6:case"end":return r.stop()}}),r)})))()},loginWithCoinbase:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.e)();case 2:return r=t.sent,t.abrupt("return",oe(e,r,"loginWithCoinbase","coinbase"));case 4:case"end":return t.stop()}}),t)})))()},loginWithBuiltInAccountlessOption:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,c,o,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.walletAddress,c=void 0===n?null:n,o=t.walletName,l=void 0===o?null:o,r.next=3,C(l);case 3:return d=r.sent,localStorage.setItem("builtinWalletName",l),A(e.commit,"walletName",l),r.abrupt("return",fe(e,d,"loginWithBuiltInAccountlessOption","builtin",c));case 7:case"end":return r.stop()}}),r)})))()},updateBuiltInAccountless:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=localStorage.getItem("builtinWalletName"),r.next=3,C(n);case 3:return c=r.sent,r.abrupt("return",me(e,c,"loginWithBuiltInAccountlessOption","builtin",t));case 5:case"end":return r.stop()}}),r)})))()},loginWithArkane:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ke(e,Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.c(e.state.arkaneHint);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),"loginWithArkane","arkane",w.a,w.b,l.a.loginArkane));case 1:case"end":return t.stop()}}),t)})))()},loginWithSocial:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,c,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.commit,n=t.socialHint,c=t.utm_data,sessionStorage.setItem("social-login",n),r.next=5,l.a.getRedirectUrl(n,c);case 5:o=r.sent,window.location.replace(o.data.redirectUrl);case 7:case"end":return r.stop()}}),r)})))()},signupViaBitski:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Oe(e,"signupViaBitski","bitski",(function(){return S.getUser()}),(function(){return S.authProvider.getAccessToken()}),l.a.signupBitski,t));case 1:case"end":return r.stop()}}),r)})))()},signupViaSocial:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(n=e.getters.getUserInfo).emailVerified=n.email,r.next=4,Oe(e,"signupViaSocial","social",(function(){return n}),(function(){return n.token}),l.a.signupSocial,t);case 4:case"end":return r.stop()}}),r)})))()},signupViaEmail:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Oe(e,"signupViaEmail","email",(function(){return null}),(function(){return null}),l.a.signupEmail,t);case 2:case"end":return r.stop()}}),r)})))()},signupViaBuiltInWallet:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C();case 2:return n=r.sent,c=ce(n.currentProvider),r.abrupt("return",be(e,n,"signupViaBuiltInWallet","builtin",c,t));case 5:case"end":return r.stop()}}),r)})))()},signupViaWConnect:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(k.f)();case 2:return n=r.sent,c=ce(n.currentProvider),r.abrupt("return",be(e,n,"signupViaWConnect","wconnect",c,t));case 5:case"end":return r.stop()}}),r)})))()},signupViaArkaneWallet:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Oe(e,"signupViaArkaneWallet","arkane",w.a,w.b,l.a.signupArkane,t));case 1:case"end":return r.stop()}}),r)})))()},signupViaCoinbase:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(k.e)();case 2:return n=r.sent,c=ce(n.currentProvider),r.abrupt("return",be(e,n,"signupViaCoinbase","coinbase",c,t));case 5:case"end":return r.stop()}}),r)})))()},logout:function(e){var t=arguments,r=this;return Object(o.a)(regeneratorRuntime.mark((function c(){var o,d,f,m,h,v,x,k,R,O;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:o=e.commit,d=e.state,f=e.dispatch,h=(m=t.length>1&&void 0!==t[1]?t[1]:{}).isLoggedOut,v=m.waitForAuth,c.prev=2,V(d,"LoggedIn"),A(o,"loginStatus","LoggingOut"),c.next=11;break;case 7:return c.prev=7,c.t0=c.catch(2),c.next=11,f("logoutAccountless");case 11:if(c.prev=11,h){c.next=27;break}if("bitski"!==d.walletType){c.next=18;break}return c.next=16,S.signOut();case 16:c.next=21;break;case 18:if("arkane"!==d.walletType){c.next=21;break}return c.next=21,w.e();case 21:return c.next=23,l.a.logout().catch((function(e){if(e&&e.response&&401!==e.response.status)throw e}));case 23:return c.next=25,window.$nuxt.$ff.refresh();case 25:return c.next=27,f("logoutAccountless");case 27:return c.next=29,Ue(v);case 29:return window.userWeb3=null,U=null,I=!1,A(o,"web3WalletType","none"),M(o,null),A(o,"isPublisher",null),A(o,"walletType",null),A(o,"requireSignup",null),A(o,"walletAddressAccountless",null),A(o,"walletAddress",null),A(o,"loginType",null),c.next=42,f("loadUser");case 42:A(o,"loginStatus","LoggedOut"),"WrongWalletAddress"===d.walletStatus&&(A(o,"requireSignup",!1),A(o,"walletStatus","Ready")),R=null===(x=r.$router)||void 0===x?void 0:x.currentRoute,("string"==typeof(O=null==R||null===(k=R.matched[0])||void 0===k||null===(k=k.components)||void 0===k||null===(k=k.default)||void 0===k||null===(k=k.extendOptions)||void 0===k?void 0:k.middleware)&&"require-auth"===O||"object"===Object(n.a)(O)&&O.some((function(e){return"require-auth"===e})))&&r.$router.pushToLocale("/"),c.next=53;break;case 49:c.prev=49,c.t1=c.catch(11),console.error("cannot logout",c.t1),A(o,"loginStatus","LoggedIn");case 53:case"end":return c.stop()}}),c,null,[[2,7],[11,49]])})))()},logoutAccountless:function(e){var t=arguments;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,c,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.state,c=e.dispatch,o=t.length>1&&void 0!==t[1]&&t[1],!n.walletAddressAccountless&&!o){r.next=5;break}return r.next=5,l.a.logoutAccountless().then((function(){n.walletAddressAccountless&&c("setTempUser",{address:null})})).catch((function(e){if(e&&e.response&&401!==e.response.status)throw e}));case 5:case"end":return r.stop()}}),r)})))()},refreshUser:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,D();case 4:return n=t.sent,M(r,n),t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(1);case 11:case"end":return t.stop()}}),t,null,[[1,9]])})))()},updateUser:function(e,data){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(v.a)(r,"updateUser"),t.prev=2,n.loading(0),t.next=6,d.a.updateUser(data);case 6:return c=t.sent,t.next=9,D();case 9:return o=t.sent,M(r,o),n.success(c),t.abrupt("return",c);case 15:throw t.prev=15,t.t0=t.catch(2),n.error(Object(v.d)(t.t0)),t.t0;case 19:case"end":return t.stop()}}),t,null,[[2,15]])})))()},updatePassword:function(e,data){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(v.a)(r,"updatePassword"),t.prev=2,n.loading(0),t.next=6,l.a.updatePassword(data);case 6:return c=t.sent,t.next=9,D();case 9:return o=t.sent,M(r,o),n.success(c),t.abrupt("return",c);case 15:throw t.prev=15,t.t0=t.catch(2),n.error(Object(v.d)(t.t0)),t.t0;case 19:case"end":return t.stop()}}),t,null,[[2,15]])})))()},updateEmail:function(e,data){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(v.a)(r,"updateEmail"),t.prev=2,n.loading(0),t.next=6,l.a.updateEmail(data);case 6:return c=t.sent,t.next=9,D();case 9:return o=t.sent,M(r,o),n.success(c),t.abrupt("return",c);case 15:throw t.prev=15,t.t0=t.catch(2),n.error(Object(v.d)(t.t0)),t.t0;case 19:case"end":return t.stop()}}),t,null,[[2,15]])})))()},requestSecurityCode:function(e,data){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(v.a)(r,"requestSecurityCode"),t.prev=2,n.loading(0),t.next=6,d.a.requestSecurityCode(data);case 6:return c=t.sent,n.success(c),t.abrupt("return",c);case 11:throw t.prev=11,t.t0=t.catch(2),n.error(Object(v.d)(t.t0)),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},verifyCode:function(e,data){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(v.a)(r,"verifyCode"),t.prev=2,n.loading(0),t.next=6,d.a.verifyCode(data);case 6:return c=t.sent,n.success(c),t.abrupt("return",c);case 11:throw t.prev=11,t.t0=t.catch(2),n.error(Object(v.d)(t.t0)),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},requestVerifyEmail:function(e,data){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(v.a)(r,"requestVerifyEmail"),t.prev=2,n.loading(0),t.next=6,d.a.requestVerifyEmail(data);case 6:return c=t.sent,n.success(c),t.abrupt("return",c);case 11:throw t.prev=11,t.t0=t.catch(2),n.error(Object(v.d)(t.t0)),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},verifyEmail:function(e,data){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(v.a)(r,"verifyEmail"),t.prev=2,n.loading(0),t.next=6,d.a.verifyEmail(data);case 6:return c=t.sent,n.success(c),t.abrupt("return",c);case 11:throw t.prev=11,t.t0=t.catch(2),n.error(Object(v.d)(t.t0)),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},isEmailVerified:function(e,data){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(v.a)(r,"isEmailVerified"),t.prev=2,t.next=5,d.a.isEmailVerified(data);case 5:return c=t.sent,n.success(c.verified),t.abrupt("return",c);case 10:throw t.prev=10,t.t0=t.catch(2),n.error(Object(v.d)(t.t0)),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},addWalletBuiltIn:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C();case 2:return r=t.sent,t.abrupt("return",ve(e,r,"addWalletBuiltIn","builtin"));case 4:case"end":return t.stop()}}),t)})))()},addWalletWConnect:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.f)();case 2:return r=t.sent,t.abrupt("return",ve(e,r,"addWalletWConnect","wconnect"));case 4:case"end":return t.stop()}}),t)})))()},addWalletCoinbase:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.e)();case 2:return r=t.sent,t.abrupt("return",ve(e,r,"addWalletCoinbase","wconnect"));case 4:case"end":return t.stop()}}),t)})))()},addWalletArkane:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",je(e,Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w.c(e.state.arkaneHint));case 1:case"end":return t.stop()}}),t)}))),"addWalletArkane","arkane",w.a,w.b,l.a.addArkane));case 1:case"end":return t.stop()}}),t)})))()},addWalletBitski:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S){t.next=3;break}return t.next=3,Te();case 3:return t.abrupt("return",je(e,Object(o.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return t=e.sent,r=t.default,e.abrupt("return",new r(S.getProvider(N())));case 5:case"end":return e.stop()}}),e)}))),"addWalletBitski","bitski",(function(){return S.signIn()}),(function(){return S.authProvider.getAccessToken()}),l.a.addBitski));case 4:case"end":return t.stop()}}),t)})))()},signIn:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,c,o,d,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.commit,c=e.dispatch,o=t.username,d=t.password,f=t.token,V(ue,void 0,"LoggedOut"),A(n,"loginStatus","LoginInWithLegacy"),r.abrupt("return",l.a.loginPassword(o,d,f).then((function(){return c("loadUser",!0)})).catch((function(e){throw A(n,"error",{code:"1000",message:"loginLegacyFailed",error:e.response?e.response.data:e.toString()}),A(n,"loginStatus","LoggedOut"),e.response?e.response.data:e.toString()})));case 5:case"end":return r.stop()}}),r)})))()},setArkaneHint:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:A(e.commit,"arkaneHint",t);case 2:case"end":return r.stop()}}),r)})))()},setSocialHint:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:A(e.commit,"socialHint",t);case 2:case"end":return r.stop()}}),r)})))()},cleanSelectedWallet:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A(e.commit,"walletType",null);case 2:case"end":return t.stop()}}),t)})))()},setUserSaved:function(e,t){var r=e.commit;Object(v.a)(r,"userSaved").success(t)},setShowNotSaveModal:function(e,t){var r=e.commit;Object(v.a)(r,"showNotSaveModal").success(t)},cancelSignUp:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A(e.commit,"requireSignup",null);case 2:case"end":return t.stop()}}),t)})))()},checkPublisherTrait:function(e,data){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,c,o,l,f,m,w,h,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,c=Object(v.a)(n,"isPublisher"),t.prev=2,c.loading(0),t.next=6,r.e(1107).then(r.bind(null,1333));case 6:return o=t.sent,l=o.unpackRules,t.next=10,r.e(795).then(r.bind(null,1332));case 10:return f=t.sent,m=f.PureAbility,t.next=14,d.a.getUserAbilities(data);case 14:return w=t.sent,h=new m(l(w.abilities)),x=h.can("admin-publish","Experience"),c.success(x),t.abrupt("return",x);case 21:throw t.prev=21,t.t0=t.catch(2),c.error(Object(v.d)(t.t0)),t.t0;case 25:case"end":return t.stop()}}),t,null,[[2,21]])})))()},uploadUserImg:Object(R.a)({prop:"uploadUserImg",func:d.a.uploadUserImg}),report:Object(R.a)({prop:"report",func:d.a.reportUser}),loadSettings:Object(R.a)({prop:"settings",func:m.a.getSettings}),updateSettings:Object(R.a)({prop:"settings",func:m.a.updateSettings})}}}]);